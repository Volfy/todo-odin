(()=>{"use strict";const e=(()=>{let e=[],t=0,o=0;const r=e=>{e.sort(((e,t)=>e.priority-t.priority))};return{project:{add:(t,d)=>{e.push({id:o,name:t,priority:d,todoList:[]}),o++,r(e)},edit:(t,o,d)=>{let n=e.filter((e=>e.id===t))[0];n.name=o,n.priority=d,r(e)},forDOM:()=>{let t=[];return e.forEach((e=>{t.push({id:e.id,name:e.name,tasks:e.todoList.length})})),t},remove:t=>{const o=e.indexOf(e.filter((e=>e.id===t))[0]);e.splice(o,1)},getIdOf:t=>e.filter((e=>e.name==t)).id},todo:(()=>{const o=t=>{let o=e.indexOf(e.filter((e=>e.id==parseInt(t)))[0]);return e[o].todoList},d=t=>{if(-2===t)return n();const r=o(t);let d=[];return r.forEach((o=>{console.log(t),d.push({id:o.id,title:o.title,dueDate:o.dueDate,projectName:e.filter((e=>e.id===t))[0].name,done:21==o.priority,projectId:t})})),d},n=()=>{let t=[];return e.forEach((e=>t.push(d(e.id)))),console.log(t.flat(1)),t.flat(1)};return{add:(e,d,n,c)=>{let l=o(e);l.push({id:t,title:d,dueDate:n,priority:c}),t++,r(l)},edit:(e,t,d,n,c)=>{let l=o(e),a=l.filter((e=>e.id===t))[0];a.title=d,a.dueDate=n,a.priority=c,r(l)},remove:(e,t)=>{let r=o(e);const d=r.indexOf(r.filter((e=>e.id===t))[0]);r.splice(d,1)},forDOM:d}})()}})(),t=(()=>{const t=(()=>{let t=document.querySelector("table tbody");const o=e=>{d(),e.forEach((e=>{(({id:e,title:t,dueDate:o,projectName:r,done:d,projectId:c})=>{n(e,t,o,r,d,c)})(e)}))},r=e=>document.querySelector(`tr[data-num='${e}']`).classList.toggle("done"),d=()=>{const e=document.createElement("tbody");t.parentNode.replaceChild(e,t),t=e},n=(d,n,c,l,a,s)=>{const i=t.insertRow();i.dataset.num=d,console.log(d),console.log(n),console.log(c),console.log(l),console.log(a),console.log(s);const u=i.insertCell(0),p=document.createElement("input");p.type="checkbox",a&&(p.checked=!0,r(d)),p.addEventListener("change",(()=>{r(d)})),u.append(p),i.insertCell(1).textContent=n,i.insertCell(2).textContent=c,i.insertCell(3).textContent=l;const m=i.insertCell(4),f=document.createElement("button");f.dataset.num=d,f.classList.add("edit"),f.textContent="Edit",m.append(f);const h=i.insertCell(5),j=document.createElement("button");j.dataset.num=d,j.dataset.projectId=s,j.classList.add("rmv"),j.textContent="Remove",j.addEventListener("click",(()=>{e.todo.remove(s,d),o(e.todo.forDOM(-2))})),h.append(j)};return{refreshAll:o}})(),o=(()=>{const e=document.querySelector(".projects-list");return{refreshAll:t=>{r.clearProjects(),document.querySelectorAll("li.project").forEach((e=>e.remove())),t.forEach((t=>{(({id:t,name:o,tasks:d})=>{((t,o,d)=>{const n=document.createElement("li"),c=document.createElement("button"),l=document.createElement("div");n.id=`${t}`,r.addProject(t,o),l.classList.add("project-no"),c.classList.add("project"),n.classList.add("project"),l.textContent=d,c.textContent=o,c.append(l),n.append(c),e.append(n)})(t,o,d)})(t)}))}}})(),r=(()=>{const e=document.querySelector(".form-section"),t=document.querySelector("#td-project-input"),o=e=>{const t=document.querySelector(".add-todo"),o=document.querySelector(".add-project");switch(e){case"todo":t.classList.add("current"),o.classList.remove("current");break;case"project":o.classList.add("current"),t.classList.remove("current")}};return{addProject:(e,o)=>{const r=document.createElement("option");r.value=`${e}`,r.textContent=o,t.append(r)},clearProjects:()=>{document.querySelectorAll("option").forEach((e=>e.remove()))},show:()=>{o("todo"),e.classList.toggle("form-open")},switchFormsTo:o}})();return{project:o,todo:t,updateViewAll:e=>{document.querySelector("#view-all .project-no").textContent=e},form:r}})(),o=()=>{t.project.refreshAll(e.project.forDOM()),t.todo.refreshAll(e.todo.forDOM(-2));const o=document.querySelector(".add-project-form"),r=document.querySelector(".add-todo-form"),d=document.querySelector(".add-new-button"),n=document.querySelector("#to-do-tab"),c=document.querySelector("#project-tab"),l=document.querySelector("#close-tab");d.addEventListener("click",t.form.show),l.addEventListener("click",t.form.show),n.addEventListener("click",(()=>{t.form.switchFormsTo("todo")})),c.addEventListener("click",(()=>{t.form.switchFormsTo("project")})),o.addEventListener("submit",(()=>{event.preventDefault(),e.project.add(document.querySelector("#pr-title-input").value,document.querySelector("#pr-priority-input").value),t.project.refreshAll(e.project.forDOM()),t.form.show()})),r.addEventListener("submit",(()=>{event.preventDefault(),e.todo.add(document.querySelector("#td-project-input").value,document.querySelector("#td-title-input").value,document.querySelector("#td-due-date-input").value,document.querySelector("#td-priority-input").value),t.todo.refreshAll(e.todo.forDOM(-2)),t.form.show()}))};e.project.add("hi",1),e.project.add("h2i",1),e.project.add("hi3",3),e.project.add("hi4",2),e.todo.add(1,"lol","date",1),e.todo.add(1,"lo2l","date",1),e.todo.add(3,"lo3l","date",1),e.todo.add(1,"lo2l","date",2),e.todo.add(3,"lo3l","date",2),e.todo.add(2,"lo3l","date",4),e.project.edit(1,"noo",1),o()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBSyxHQUM3QlgsRUFBWVUsUUFBUUMsSUFBSSxNQUFNLEdBQzlCWCxFQUFZVSxRQUFRQyxJQUFJLE1BQU0sR0FDOUJYLEVBQVlVLFFBQVFDLElBQUksTUFBTSxHQUU5QlgsRUFBWThCLEtBQUtuQixJQUFJLEVBQUcsTUFBTSxPQUFPLEdBQ3JDWCxFQUFZOEIsS0FBS25CLElBQUksRUFBRyxPQUFPLE9BQU8sR0FDdENYLEVBQVk4QixLQUFLbkIsSUFBSSxFQUFHLE9BQU8sT0FBTyxHQUN0Q1gsRUFBWThCLEtBQUtuQixJQUFJLEVBQUcsT0FBTyxPQUFPLEdBQ3RDWCxFQUFZOEIsS0FBS25CLElBQUksRUFBRyxPQUFPLE9BQU8sR0FDdENYLEVBQVk4QixLQUFLbkIsSUFBSSxFQUFHLE9BQU8sT0FBTyxHQUV0Q1gsRUFBWVUsUUFBUU0sS0FBSyxFQUFFLE1BQU0sR0FFakNnRixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1vZGluLy4vc3JjL2RhdGEuanMiLCJ3ZWJwYWNrOi8vdG9kby1vZGluLy4vc3JjL21hbmlwcy5qcyIsIndlYnBhY2s6Ly90b2RvLW9kaW4vLi9zcmMvaW50ZXJmYWNlLmpzIiwid2VicGFjazovL3RvZG8tb2Rpbi8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBOQjogcHJpb3JpdHkgPSAwIG9yIC0xIGZvciBhIENvbXBsZXRlZCBUYXNrXG4vLyBQUklPUklUWSAyMSA9PT0gRE9ORVxuXG5cbmNvbnN0IERhdGFIYW5kbGVyID0gKCgpID0+IHtcbiAgICBsZXQgcHJvamVjdExpc3QgPSBbXTtcblxuICAgIGxldCB0YXNrSWRDb3VudCA9IDA7XG4gICAgbGV0IHByb2plY3RJZENvdW50ID0gMDtcblxuICAgIGNvbnN0IHNvcnRMaXN0ID0gKGxpc3QpID0+IHtcbiAgICAgICAgbGlzdC5zb3J0KChhLGIpPT5hLnByaW9yaXR5IC0gYi5wcmlvcml0eSk7XG4gICAgfVxuXG4gICAgY29uc3QgcHJvamVjdCA9ICgoKT0+e1xuICAgICAgICBjb25zdCBhZGQgPSAobmFtZSwgcHJpb3JpdHkpID0+IHtcbiAgICAgICAgICAgIGxldCB0b2RvTGlzdCA9IFtdO1xuICAgICAgICAgICAgcHJvamVjdExpc3QucHVzaCh7aWQ6IHByb2plY3RJZENvdW50LG5hbWUscHJpb3JpdHksdG9kb0xpc3R9KVxuICAgICAgICAgICAgcHJvamVjdElkQ291bnQrKztcbiAgICAgICAgICAgIHNvcnRMaXN0KHByb2plY3RMaXN0KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZW1vdmUgPSBpZCA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0SW5kZXggPSBwcm9qZWN0TGlzdC5pbmRleE9mKHByb2plY3RMaXN0LmZpbHRlcihwcm9qID0+IHByb2ouaWQgPT09IGlkKVswXSk7XG4gICAgICAgICAgICBwcm9qZWN0TGlzdC5zcGxpY2UocHJvamVjdEluZGV4LDEpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVkaXRcbiAgICAgICAgY29uc3QgZWRpdCA9IChpZCwgbmFtZSwgcHJpb3JpdHkpID0+IHtcbiAgICAgICAgICAgIGxldCBwcm9qZWN0VG9DaGFuZ2UgPSBwcm9qZWN0TGlzdC5maWx0ZXIocHJvaiA9PiBwcm9qLmlkID09PSBpZClbMF1cbiAgICAgICAgICAgIHByb2plY3RUb0NoYW5nZS5uYW1lID0gbmFtZTtcbiAgICAgICAgICAgIHByb2plY3RUb0NoYW5nZS5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgICAgICAgICAgc29ydExpc3QocHJvamVjdExpc3QpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGdldElkT2YgPSBwcm9qZWN0TmFtZSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gcHJvamVjdExpc3QuZmlsdGVyKHByb2ogPT4gcHJvai5uYW1lID09IHByb2plY3ROYW1lKS5pZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmb3JET00gPSAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgbGlzdCA9IFtdO1xuICAgICAgICAgICAgLy8gaWQsIHRpdGxlLCBudW1iZXJcbiAgICAgICAgICAgIHByb2plY3RMaXN0LmZvckVhY2gocHJvaiA9PiB7XG4gICAgICAgICAgICAgICAgbGlzdC5wdXNoKHtpZDogcHJvai5pZCwgbmFtZTogcHJvai5uYW1lLCB0YXNrczogcHJvai50b2RvTGlzdC5sZW5ndGh9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHthZGQsIGVkaXQsIGZvckRPTSwgcmVtb3ZlLCBnZXRJZE9mfTtcbiAgICB9KSgpO1xuICAgIGNvbnN0IHRvZG8gPSAoKCk9PntcbiAgICAgICAgY29uc3QgZ2V0VG9kb0xpc3QgPSAocHJvamVjdElkKSA9PiB7XG4gICAgICAgICAgICBsZXQgcHJvamVjdEluZGV4ID0gcHJvamVjdExpc3QuaW5kZXhPZihwcm9qZWN0TGlzdC5maWx0ZXIocHJvaiA9PiBwcm9qLmlkID09IHBhcnNlSW50KHByb2plY3RJZCkpWzBdKTtcbiAgICAgICAgICAgIHJldHVybiBwcm9qZWN0TGlzdFtwcm9qZWN0SW5kZXhdLnRvZG9MaXN0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFkZCA9IChwcm9qZWN0SWQsIHRpdGxlLCBkdWVEYXRlLCBwcmlvcml0eSkgPT4ge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsZXQgY3VycmVudFRvZG9MaXN0ID0gZ2V0VG9kb0xpc3QocHJvamVjdElkKTtcbiAgICAgICAgICAgIGN1cnJlbnRUb2RvTGlzdC5wdXNoKHtpZDogdGFza0lkQ291bnQsIHRpdGxlLCBkdWVEYXRlLCBwcmlvcml0eX0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0YXNrSWRDb3VudCsrO1xuICAgICAgICAgICAgc29ydExpc3QoY3VycmVudFRvZG9MaXN0KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZW1vdmUgPSAocHJvamVjdElkLGlkKSA9PiB7XG4gICAgICAgICAgICBsZXQgY3VycmVudFRvZG9MaXN0ID0gZ2V0VG9kb0xpc3QocHJvamVjdElkKTtcbiAgICAgICAgICAgIGNvbnN0IHRvZG9JbmRleCA9IGN1cnJlbnRUb2RvTGlzdC5pbmRleE9mKGN1cnJlbnRUb2RvTGlzdC5maWx0ZXIodGQgPT4gdGQuaWQgPT09IGlkKVswXSk7XG4gICAgICAgICAgICBjdXJyZW50VG9kb0xpc3Quc3BsaWNlKHRvZG9JbmRleCwxKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlZGl0ID0gKHByb2plY3RJZCwgaWQsIHRpdGxlLCBkdWVEYXRlLCBwcmlvcml0eSkgPT4ge1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRUb2RvTGlzdCA9IGdldFRvZG9MaXN0KHByb2plY3RJZCk7XG4gICAgICAgICAgICBsZXQgdGFza1RvQ2hhbmdlID0gY3VycmVudFRvZG9MaXN0LmZpbHRlcih0YXNrID0+IHRhc2suaWQgPT09IGlkKVswXTtcbiAgICAgICAgICAgIHRhc2tUb0NoYW5nZS50aXRsZSA9IHRpdGxlO1xuICAgICAgICAgICAgdGFza1RvQ2hhbmdlLmR1ZURhdGUgPSBkdWVEYXRlO1xuICAgICAgICAgICAgdGFza1RvQ2hhbmdlLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gICAgICAgICAgICBzb3J0TGlzdChjdXJyZW50VG9kb0xpc3QpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZvckRPTSA9IChwcm9qZWN0SWQpID0+IHtcbiAgICAgICAgICAgIC8vIG1ha2VzIGl0IGVhc2llciB0byB0cmFjayBzdGF0ZVxuICAgICAgICAgICAgaWYocHJvamVjdElkPT09LTIpe1xuICAgICAgICAgICAgICAgIHJldHVybiBhbGxGb3JET00oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUb2RvTGlzdCA9IGdldFRvZG9MaXN0KHByb2plY3RJZCk7XG4gICAgICAgICAgICBsZXQgbGlzdCA9IFtdO1xuICAgICAgICAgICAgLy8gaWQsIHRpdGxlLCBkdWVEYXRlLCBwcm9qZWN0TmFtZSwgZG9uZT9cbiAgICAgICAgICAgIGN1cnJlbnRUb2RvTGlzdC5mb3JFYWNoKHRhc2sgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb2plY3RJZClcbiAgICAgICAgICAgICAgICBsaXN0LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBpZDogdGFzay5pZCwgdGl0bGU6IHRhc2sudGl0bGUsIGR1ZURhdGU6IHRhc2suZHVlRGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdE5hbWU6IHByb2plY3RMaXN0LmZpbHRlcihwcm9qID0+IHByb2ouaWQgPT09IHByb2plY3RJZClbMF0ubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZG9uZTogdGFzay5wcmlvcml0eSA9PSAyMSA/IHRydWUgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgcHJvamVjdElkOiBwcm9qZWN0SWQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBsaXN0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFsbEZvckRPTSA9ICgpID0+IHtcbiAgICAgICAgICAgIGxldCBsaXN0ID0gW107XG4gICAgICAgICAgICBwcm9qZWN0TGlzdC5mb3JFYWNoKHByb2ogPT4gbGlzdC5wdXNoKGZvckRPTShwcm9qLmlkKSkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cobGlzdC5mbGF0KDEpKTtcbiAgICAgICAgICAgIHJldHVybiBsaXN0LmZsYXQoMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHthZGQsIGVkaXQsIHJlbW92ZSwgZm9yRE9NfTtcbiAgICB9KSgpO1xuXG4gICAgcmV0dXJuIHtwcm9qZWN0LCB0b2RvfTtcbn0pKCk7XG5cblxuZXhwb3J0IHtEYXRhSGFuZGxlcn07IiwiLy8gU1RPUkVTIERPTSBNQU5JUFVMQVRJT05TXG5cbmltcG9ydCB7IERhdGFIYW5kbGVyIH0gZnJvbSBcIi4vZGF0YVwiO1xuXG5jb25zdCBET01IYW5kbGVyID0gKCgpID0+IHtcbiAgICAvLyBUTy1ETyBNQU5JUFNcblxuICAgIGNvbnN0IHRvZG8gPSAoKCkgPT4ge1xuICAgICAgICBsZXQgdGFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0YWJsZSB0Ym9keScpO1xuXG4gICAgICAgIGNvbnN0IHJlZnJlc2hBbGwgPSB0b2RvQXJyYXkgPT4ge1xuICAgICAgICAgICAgY2xlYXJBbGwoKTtcbiAgICAgICAgICAgIHRvZG9BcnJheS5mb3JFYWNoKHRvZG9PYmplY3QgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGRlc3RydWN0dXJlIHRoZSBvYmplY3QgYW5kIElJRkUgaXQgaW50byBhZGRcbiAgICAgICAgICAgICAgICAoKHtpZCwgdGl0bGUsIGR1ZURhdGUsIHByb2plY3ROYW1lLCBkb25lLCBwcm9qZWN0SWR9KSA9PiBcbiAgICAgICAgICAgICAgICBhZGQoaWQsIHRpdGxlLCBkdWVEYXRlLCBwcm9qZWN0TmFtZSwgZG9uZSwgcHJvamVjdElkKSkodG9kb09iamVjdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1hcmtEb25lID0gKGlkKSA9PiBcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHRyW2RhdGEtbnVtPScke2lkfSddYClcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzTGlzdFxuICAgICAgICAgICAgICAgICAgICAudG9nZ2xlKCdkb25lJyk7XG5cbiAgICAgICAgY29uc3QgY2xlYXJBbGwgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdCb2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGJvZHknKTtcbiAgICAgICAgICAgIHRhYmxlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld0JvZHksIHRhYmxlKTtcbiAgICAgICAgICAgIC8vIHRoZSBub2RlIHRoYXQgdXNlZCB0byBiZSB0YWJsZSBpcyBub3cgZ29uZS5cbiAgICAgICAgICAgIC8vIHNvIHJlZnJlc2ggaXRcbiAgICAgICAgICAgIHRhYmxlID0gbmV3Qm9keTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFkZCA9IChpZCwgdGl0bGUsIGR1ZURhdGUsIHByb2plY3ROYW1lLCBkb25lLCBwcm9qZWN0SWQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1JvdyA9IHRhYmxlLmluc2VydFJvdygpO1xuICAgICAgICAgICAgbmV3Um93LmRhdGFzZXQubnVtID0gaWQ7XG5cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGlkKVxuICAgICAgICAgICAgY29uc29sZS5sb2codGl0bGUpXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkdWVEYXRlKVxuICAgICAgICAgICAgY29uc29sZS5sb2cocHJvamVjdE5hbWUpXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkb25lKVxuICAgICAgICAgICAgY29uc29sZS5sb2cocHJvamVjdElkKVxuXG4gICAgICAgICAgICBjb25zdCBuZXdDaGsgPSBuZXdSb3cuaW5zZXJ0Q2VsbCgwKTtcbiAgICAgICAgICAgIGNvbnN0IENoa0luID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgIENoa0luLnR5cGUgPSAnY2hlY2tib3gnO1xuICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgICBDaGtJbi5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBtYXJrRG9uZShpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDaGVja2JveCBFdmVudCBMaXN0ZW5lclxuICAgICAgICAgICAgLy8gVGhpcyBzaG91bGQgbm90IGhhcHBlbiBkaXJlY3RseSxcbiAgICAgICAgICAgIC8vIGJ1dCBtYXJrRG9uZSBzaG91bGQgZ2V0IGNhbGxlZCBieSBhIGZ1bmN0aW9uXG4gICAgICAgICAgICAvLyBhZnRlciBvYmplY3Qgc3RhdGUgaXMgY2hhbmdlZCBcbiAgICAgICAgICAgIENoa0luLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBtYXJrRG9uZShpZCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgbmV3Q2hrLmFwcGVuZChDaGtJbik7XG5cbiAgICAgICAgICAgIGNvbnN0IG5ld1RpdGxlID0gbmV3Um93Lmluc2VydENlbGwoMSk7XG4gICAgICAgICAgICBuZXdUaXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xuXG4gICAgICAgICAgICBjb25zdCBuZXdEYXRlID0gbmV3Um93Lmluc2VydENlbGwoMik7XG4gICAgICAgICAgICBuZXdEYXRlLnRleHRDb250ZW50ID0gZHVlRGF0ZTtcblxuICAgICAgICAgICAgY29uc3QgbmV3UHJvamVjdCA9IG5ld1Jvdy5pbnNlcnRDZWxsKDMpO1xuICAgICAgICAgICAgbmV3UHJvamVjdC50ZXh0Q29udGVudCA9IHByb2plY3ROYW1lO1xuXG4gICAgICAgICAgICBjb25zdCBuZXdFZGl0ID0gbmV3Um93Lmluc2VydENlbGwoNCk7XG4gICAgICAgICAgICBjb25zdCBFZGl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgICAgICBFZGl0QnRuLmRhdGFzZXQubnVtID0gaWQ7IC8vIG1heSBub3QgZXZlbiBiZSByZWxldmFudFxuICAgICAgICAgICAgRWRpdEJ0bi5jbGFzc0xpc3QuYWRkKCdlZGl0Jyk7XG4gICAgICAgICAgICBFZGl0QnRuLnRleHRDb250ZW50ID0gXCJFZGl0XCI7XG4gICAgICAgICAgICAvLyBFZGl0IEV2ZW50IExpc3RlbmVyXG4gICAgICAgICAgICBuZXdFZGl0LmFwcGVuZChFZGl0QnRuKTtcblxuXG4gICAgICAgICAgICBjb25zdCBuZXdSbXYgPSBuZXdSb3cuaW5zZXJ0Q2VsbCg1KTtcbiAgICAgICAgICAgIGNvbnN0IFJtdkJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgUm12QnRuLmRhdGFzZXQubnVtID0gaWQ7IC8vIG1heSBub3QgZXZlbiBiZSByZWxldmFudFxuICAgICAgICAgICAgUm12QnRuLmRhdGFzZXQucHJvamVjdElkID0gcHJvamVjdElkO1xuICAgICAgICAgICAgUm12QnRuLmNsYXNzTGlzdC5hZGQoJ3JtdicpO1xuICAgICAgICAgICAgUm12QnRuLnRleHRDb250ZW50ID0gXCJSZW1vdmVcIjtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBFdmVudCBMaXN0ZW5lclxuICAgICAgICAgICAgLy8gVGhpcyBzaG91bGQgTk9UIGRpcmVjdGx5IGNhbGwgdGhlIERPTSBNYW5pcC4gT3RoZXJ3aXNlXG4gICAgICAgICAgICAvLyB0aGUgdW5kZXJseWluZyBUby1kbyBvYmplY3Qgd2lsbCBub3QgYmUgZGVsZXRlZCFcbiAgICAgICAgICAgIFJtdkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICBEYXRhSGFuZGxlci50b2RvLnJlbW92ZShwcm9qZWN0SWQsIGlkKTtcblxuICAgICAgICAgICAgICAgIHJlZnJlc2hBbGwoRGF0YUhhbmRsZXIudG9kby5mb3JET00oLTIpKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBuZXdSbXYuYXBwZW5kKFJtdkJ0bik7XG5cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge3JlZnJlc2hBbGx9O1xuXG4gICAgfSkoKTtcblxuICAgIC8vIFBST0pFQ1QgTUFOSVBTXG5cbiAgICBjb25zdCB1cGRhdGVWaWV3QWxsID0gdGFza3MgPT4ge1xuICAgICAgICBjb25zdCB2aWV3QWxsTnVtYmVyRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ZpZXctYWxsIC5wcm9qZWN0LW5vJyk7XG4gICAgICAgIHZpZXdBbGxOdW1iZXJEaXYudGV4dENvbnRlbnQgPSB0YXNrcztcbiAgICB9XG5cbiAgICBjb25zdCBwcm9qZWN0ID0gKCgpID0+IHtcbiAgICAgICAgY29uc3QgcHJvamVjdHNMaXN0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cy1saXN0Jyk7XG5cbiAgICAgICAgY29uc3QgcmVmcmVzaEFsbCA9IHByb2plY3RBcnJheSA9PiB7XG4gICAgICAgICAgICBjbGVhckFsbCgpO1xuICAgICAgICAgICAgcHJvamVjdEFycmF5LmZvckVhY2gocHJvamVjdE9iamVjdCA9PiB7XG4gICAgICAgICAgICAgICAgLy8gZGVzdHJ1Y3R1cmUgdGhlIG9iamVjdCBhbmQgSUlGRSBpdCBpbnRvIGFkZFxuICAgICAgICAgICAgICAgICgoe2lkLCBuYW1lLCB0YXNrc30pID0+IFxuICAgICAgICAgICAgICAgIGFkZChpZCwgbmFtZSwgdGFza3MpKShwcm9qZWN0T2JqZWN0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNsZWFyQWxsID0gKCkgPT4ge1xuICAgICAgICAgICAgZm9ybS5jbGVhclByb2plY3RzKCk7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0TGlzdEl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnbGkucHJvamVjdCcpO1xuICAgICAgICAgICAgcHJvamVjdExpc3RJdGVtcy5mb3JFYWNoKHByb2ogPT4gcHJvai5yZW1vdmUoKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBjb25zdCBhZGQgPSAoaWQsIG5hbWUsIHRhc2tzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgY29uc3QgbmV3RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgXG4gICAgICAgICAgICAvLyBJRCBnZW5lcmF0aW9uIHNob3VsZCBiZSBoYW5kbGVkIGluIGxvZ2ljLiBcbiAgICAgICAgICAgIG5ld0l0ZW0uaWQgPSBgJHtpZH1gO1xuICAgICAgICAgICAgZm9ybS5hZGRQcm9qZWN0KGlkLCBuYW1lKTtcbiAgICBcbiAgICAgICAgICAgIG5ld0Rpdi5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LW5vJyk7XG4gICAgICAgICAgICBuZXdCdG4uY2xhc3NMaXN0LmFkZCgncHJvamVjdCcpO1xuICAgICAgICAgICAgbmV3SXRlbS5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0Jyk7XG4gICAgXG4gICAgICAgICAgICBuZXdEaXYudGV4dENvbnRlbnQgPSB0YXNrcztcbiAgICAgICAgICAgIG5ld0J0bi50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG5ld0J0bi5hcHBlbmQobmV3RGl2KTtcbiAgICAgICAgICAgIG5ld0l0ZW0uYXBwZW5kKG5ld0J0bik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHByb2plY3RzTGlzdEVsZW1lbnQuYXBwZW5kKG5ld0l0ZW0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEkgYW0gbm90IHN1cmUgaWYgdGhlc2Ugd2lsbCBiZSByZWxldmFudCBsYXRlci5cblxuICAgICAgICAvLyBjb25zdCByZW1vdmUgPSBpZCA9PiB7XG4gICAgICAgIC8vICAgICBjb25zdCBpdGVtVG9SZW1vdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpZH1gKTtcbiAgICAgICAgLy8gICAgIGl0ZW1Ub1JlbW92ZS5yZW1vdmUoKTtcbiAgICAgICAgLy8gICAgIGZvcm0ucmVtb3ZlUHJvamVjdChpZCk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gY29uc3QgdXBkYXRlID0gKGlkLCB0YXNrcykgPT4ge1xuICAgICAgICAvLyAgICAgY29uc3QgbnVtYmVyRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aWR9IC5wcm9qZWN0LW5vYCk7XG4gICAgICAgIC8vICAgICBudW1iZXJEaXYudGV4dENvbnRlbnQgPSB0YXNrcztcbiAgICAgICAgICAgIFxuICAgICAgICAvLyB9XG4gICAgXG4gICAgICAgIC8vIC8vIEkgYW0gbm90IHN1cmUgaWYgdGhpcyBpcyB1c2VmdWwgb3IgY29ycmVjdC5cbiAgICAgICAgLy8gY29uc3QgX3VwZGF0ZU5hbWUgPSAoaWQsIG5hbWUpID0+IHtcbiAgICAgICAgLy8gICAgIGNvbnN0IG5hbWVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpZH0gYnV0dG9uYCk7XG4gICAgICAgIC8vICAgICBjb25zdCBudW1iZXJEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpZH0gLnByb2plY3Qtbm9gKTtcbiAgICAgICAgLy8gICAgIG5hbWVCdG4udGV4dENvbnRlbnQgPSBuYW1lO1xuICAgICAgICAvLyAgICAgbmFtZUJ0bi5hcHBlbmQobnVtYmVyRGl2KTtcbiAgICAgICAgLy8gICAgIC8vIGZvcm1NYW5pcHMuYWRkUHJvamVjdChpZCwgbmFtZSk7XG4gICAgICAgIC8vIH1cbiAgICBcbiAgICAgICAgcmV0dXJuIHtyZWZyZXNoQWxsfVxuICAgIH0pKCk7XG4gICAgXG4gICAgLy8gRk9STSBNQU5JUFNcbiAgICBcbiAgICBjb25zdCBmb3JtID0gKCgpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybVNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybS1zZWN0aW9uJyk7XG4gICAgICAgIGNvbnN0IHByb2plY3RPcHRpb25zTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0ZC1wcm9qZWN0LWlucHV0Jyk7XG5cbiAgICAgICAgY29uc3Qgc2hvdyA9ICgpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaEZvcm1zVG8oJ3RvZG8nKTtcbiAgICAgICAgICAgIGZvcm1TZWN0aW9uLmNsYXNzTGlzdC50b2dnbGUoJ2Zvcm0tb3BlbicpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHN3aXRjaEZvcm1zVG8gPSBuYW1lID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRvZG9Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10b2RvJyk7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtcHJvamVjdCcpO1xuICAgICAgICAgICAgLy8gdGhpcyBpbXBsZW1lbnRhdGlvbiBtYWtlcyBpdCBlYXN5IHRvIGFkZCwgZWcsIGEgbm90ZXMgdGFiXG4gICAgICAgICAgICBzd2l0Y2gobmFtZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RvZG8nOlxuICAgICAgICAgICAgICAgICAgICB0b2RvRm9ybS5jbGFzc0xpc3QuYWRkKCdjdXJyZW50Jyk7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RGb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ2N1cnJlbnQnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAncHJvamVjdCc6XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3RGb3JtLmNsYXNzTGlzdC5hZGQoJ2N1cnJlbnQnKTtcbiAgICAgICAgICAgICAgICAgICAgdG9kb0Zvcm0uY2xhc3NMaXN0LnJlbW92ZSgnY3VycmVudCcpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhazsgXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGFkZFByb2plY3QgPSAoaWQsIG5hbWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld09wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgICAgICAgICAgbmV3T3B0aW9uLnZhbHVlID0gYCR7aWR9YDtcbiAgICAgICAgICAgIG5ld09wdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgICAgICAgICBwcm9qZWN0T3B0aW9uc0xpc3QuYXBwZW5kKG5ld09wdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTm90IHN1cmUgaWYgd2lsbCBiZSByZWxldmFudCBMYXRlclxuICAgICAgICBjb25zdCBjbGVhclByb2plY3RzID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uc1RvUmVtb3ZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgb3B0aW9uYCk7XG4gICAgICAgICAgICBvcHRpb25zVG9SZW1vdmUuZm9yRWFjaChwcm9qID0+IHByb2oucmVtb3ZlKCkpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHthZGRQcm9qZWN0LCBjbGVhclByb2plY3RzLCBzaG93LCBzd2l0Y2hGb3Jtc1RvfTtcbiAgICB9KSgpO1xuXG5cblxuXG4gICAgcmV0dXJuIHtwcm9qZWN0LCB0b2RvLCB1cGRhdGVWaWV3QWxsLCBmb3JtfTtcblxufSkoKTtcblxuXG5cblxuXG5cblxuXG5cblxuZXhwb3J0IHtET01IYW5kbGVyfTsiLCIvLyBBZGQgVG9kbyBGb3JtIC0gY3JlYXRlcyBuZXcgdG9kbyBpbiBkYXRhICYgYWRkcyB0byBET00uXG4vLyBBZGQgUHJvamVjdCBGb3JtIC0gY3JlYXRlcyBuZXcgcHJvamVjdCBpbiBkYXRhICYgYWRkcyB0byBET00uXG5cbmltcG9ydCB7IERhdGFIYW5kbGVyIH0gZnJvbSBcIi4vZGF0YVwiO1xuaW1wb3J0IHsgRE9NSGFuZGxlciB9IGZyb20gXCIuL21hbmlwc1wiO1xuXG5jb25zdCBpbml0aWFsaXplciA9ICgoKSA9PiB7XG5cbiAgICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgICAgICBET01IYW5kbGVyLnByb2plY3QucmVmcmVzaEFsbChEYXRhSGFuZGxlci5wcm9qZWN0LmZvckRPTSgpKTtcbiAgICAgICAgRE9NSGFuZGxlci50b2RvLnJlZnJlc2hBbGwoRGF0YUhhbmRsZXIudG9kby5mb3JET00oLTIpKTtcblxuICAgICAgICBjb25zdCBQcm9qZWN0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtcHJvamVjdC1mb3JtJyk7XG4gICAgICAgIGNvbnN0IFRvZG9Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10b2RvLWZvcm0nKTtcblxuICAgICAgICBjb25zdCBhZGROZXdCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLW5ldy1idXR0b24nKTtcbiAgICAgICAgY29uc3QgdG9kb0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0by1kby10YWInKTtcbiAgICAgICAgY29uc3QgcHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9qZWN0LXRhYicpO1xuICAgICAgICBjb25zdCBjbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjbG9zZS10YWInKTtcblxuICAgICAgICBhZGROZXdCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBET01IYW5kbGVyLmZvcm0uc2hvdyk7XG4gICAgICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgRE9NSGFuZGxlci5mb3JtLnNob3cpO1xuICAgICAgICB0b2RvQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgRE9NSGFuZGxlci5mb3JtLnN3aXRjaEZvcm1zVG8oJ3RvZG8nKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIERPTUhhbmRsZXIuZm9ybS5zd2l0Y2hGb3Jtc1RvKCdwcm9qZWN0Jyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFBST0pFQ1QgRk9STSBFVkVOVFNcbiAgICAgICAgUHJvamVjdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIC8vIEFkZCBwcm9qZWN0IHRvIGRhdGFcbiAgICAgICAgICAgIERhdGFIYW5kbGVyLnByb2plY3QuYWRkKFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwci10aXRsZS1pbnB1dCcpLnZhbHVlLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwci1wcmlvcml0eS1pbnB1dCcpLnZhbHVlLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIC8vIGkgZm9yZ290IHRvIGltcGxlbWVudCBkZXNjcmlwdGlvbnMuLi4uXG4gICAgICAgICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHItZGVzY3JpcHRpb24taW5wdXQnKTtcbiAgICBcbiAgICAgICAgICAgIC8vIHJlZnJlc2ggbGlzdFxuICAgICAgICAgICAgRE9NSGFuZGxlci5wcm9qZWN0LnJlZnJlc2hBbGwoRGF0YUhhbmRsZXIucHJvamVjdC5mb3JET00oKSk7XG4gICAgICAgICAgICBET01IYW5kbGVyLmZvcm0uc2hvdygpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBUT0RPIEZPUk0gRVZFTlRTXG4gICAgICAgIFRvZG9Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsICgpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAvLyBBZGQgcHJvamVjdCB0byBkYXRhXG4gICAgICAgICAgICBEYXRhSGFuZGxlci50b2RvLmFkZChcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGQtcHJvamVjdC1pbnB1dCcpLnZhbHVlLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0ZC10aXRsZS1pbnB1dCcpLnZhbHVlLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0ZC1kdWUtZGF0ZS1pbnB1dCcpLnZhbHVlLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0ZC1wcmlvcml0eS1pbnB1dCcpLnZhbHVlLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIC8vIGkgZm9yZ290IHRvIGltcGxlbWVudCBkZXNjcmlwdGlvbnMuLi4uXG4gICAgICAgICAgICAvLyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHItZGVzY3JpcHRpb24taW5wdXQnKTtcbiAgICBcbiAgICAgICAgICAgIC8vIHJlZnJlc2ggbGlzdFxuICAgICAgICAgICAgRE9NSGFuZGxlci50b2RvLnJlZnJlc2hBbGwoRGF0YUhhbmRsZXIudG9kby5mb3JET00oLTIpKTtcbiAgICAgICAgICAgIERPTUhhbmRsZXIuZm9ybS5zaG93KCk7XG4gICAgICAgIH0pO1xuXG4gICAgfVxuICAgIHJldHVybiB7aW5pdH07XG5cbn0pKCk7XG5cbmV4cG9ydCB7aW5pdGlhbGl6ZXJ9O1xuIiwiaW1wb3J0ICcuL3N0eWxlLmNzcyc7XG5pbXBvcnQge0RPTUhhbmRsZXJ9IGZyb20gJy4vbWFuaXBzJztcbmltcG9ydCB7RGF0YUhhbmRsZXJ9IGZyb20gJy4vZGF0YSc7XG5pbXBvcnQgeyBpbml0aWFsaXplciB9IGZyb20gJy4vaW50ZXJmYWNlJztcblxuLy8gTGlzdCBUby1kb3MgYW5kIFByb2plY3RzIGluIGxldmVsIG9mIHByaW9yaXR5P1xuXG4vLyBJTVBPUlRTIFRFU1RJTkdcblxuXG4vLyBET01IYW5kbGVyLnVwZGF0ZVZpZXdBbGwoMjIpO1xuLy8gRE9NSGFuZGxlci5wcm9qZWN0LnJlZnJlc2hBbGwocHJvamVjdExpc3QpO1xuLy8gRE9NSGFuZGxlci50b2RvLnJlZnJlc2hBbGwodG9kb0xpc3QpO1xuXG5EYXRhSGFuZGxlci5wcm9qZWN0LmFkZCgnaGknLDEpO1xuRGF0YUhhbmRsZXIucHJvamVjdC5hZGQoJ2gyaScsMSk7XG5EYXRhSGFuZGxlci5wcm9qZWN0LmFkZCgnaGkzJywzKTtcbkRhdGFIYW5kbGVyLnByb2plY3QuYWRkKCdoaTQnLDIpO1xuXG5EYXRhSGFuZGxlci50b2RvLmFkZCgxLCAnbG9sJywnZGF0ZScsMSk7XG5EYXRhSGFuZGxlci50b2RvLmFkZCgxLCAnbG8ybCcsJ2RhdGUnLDEpO1xuRGF0YUhhbmRsZXIudG9kby5hZGQoMywgJ2xvM2wnLCdkYXRlJywxKTtcbkRhdGFIYW5kbGVyLnRvZG8uYWRkKDEsICdsbzJsJywnZGF0ZScsMik7XG5EYXRhSGFuZGxlci50b2RvLmFkZCgzLCAnbG8zbCcsJ2RhdGUnLDIpO1xuRGF0YUhhbmRsZXIudG9kby5hZGQoMiwgJ2xvM2wnLCdkYXRlJyw0KTtcblxuRGF0YUhhbmRsZXIucHJvamVjdC5lZGl0KDEsJ25vbycsMSk7XG4vLyBEYXRhSGFuZGxlci50b2RvLmVkaXQoMSwgMCwnY2hqYWdlJywnZHVlJywxKTtcbmluaXRpYWxpemVyLmluaXQoKTtcbiJdLCJuYW1lcyI6WyJEYXRhSGFuZGxlciIsInByb2plY3RMaXN0IiwidGFza0lkQ291bnQiLCJwcm9qZWN0SWRDb3VudCIsInNvcnRMaXN0IiwibGlzdCIsInNvcnQiLCJhIiwiYiIsInByaW9yaXR5IiwicHJvamVjdCIsImFkZCIsIm5hbWUiLCJwdXNoIiwiaWQiLCJ0b2RvTGlzdCIsImVkaXQiLCJwcm9qZWN0VG9DaGFuZ2UiLCJmaWx0ZXIiLCJwcm9qIiwiZm9yRE9NIiwiZm9yRWFjaCIsInRhc2tzIiwibGVuZ3RoIiwicmVtb3ZlIiwicHJvamVjdEluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImdldElkT2YiLCJwcm9qZWN0TmFtZSIsInRvZG8iLCJnZXRUb2RvTGlzdCIsInByb2plY3RJZCIsInBhcnNlSW50IiwiYWxsRm9yRE9NIiwiY3VycmVudFRvZG9MaXN0IiwidGFzayIsImNvbnNvbGUiLCJsb2ciLCJ0aXRsZSIsImR1ZURhdGUiLCJkb25lIiwiZmxhdCIsInRhc2tUb0NoYW5nZSIsInRvZG9JbmRleCIsInRkIiwiRE9NSGFuZGxlciIsInRhYmxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicmVmcmVzaEFsbCIsInRvZG9BcnJheSIsImNsZWFyQWxsIiwidG9kb09iamVjdCIsIm1hcmtEb25lIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwibmV3Qm9keSIsImNyZWF0ZUVsZW1lbnQiLCJwYXJlbnROb2RlIiwicmVwbGFjZUNoaWxkIiwibmV3Um93IiwiaW5zZXJ0Um93IiwiZGF0YXNldCIsIm51bSIsIm5ld0NoayIsImluc2VydENlbGwiLCJDaGtJbiIsInR5cGUiLCJjaGVja2VkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImFwcGVuZCIsInRleHRDb250ZW50IiwibmV3RWRpdCIsIkVkaXRCdG4iLCJuZXdSbXYiLCJSbXZCdG4iLCJwcm9qZWN0c0xpc3RFbGVtZW50IiwicHJvamVjdEFycmF5IiwiZm9ybSIsImNsZWFyUHJvamVjdHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwicHJvamVjdE9iamVjdCIsIm5ld0l0ZW0iLCJuZXdCdG4iLCJuZXdEaXYiLCJhZGRQcm9qZWN0IiwiZm9ybVNlY3Rpb24iLCJwcm9qZWN0T3B0aW9uc0xpc3QiLCJzd2l0Y2hGb3Jtc1RvIiwidG9kb0Zvcm0iLCJwcm9qZWN0Rm9ybSIsIm5ld09wdGlvbiIsInZhbHVlIiwic2hvdyIsInVwZGF0ZVZpZXdBbGwiLCJpbml0aWFsaXplciIsIlByb2plY3RGb3JtIiwiVG9kb0Zvcm0iLCJhZGROZXdCdG4iLCJ0b2RvQnRuIiwicHJvamVjdEJ0biIsImNsb3NlQnRuIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCJdLCJzb3VyY2VSb290IjoiIn0=