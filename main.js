(()=>{"use strict";(()=>{(()=>{let t=document.querySelector("table tbody")})(),(()=>{const t=document.querySelector(".projects-list")})();const t=(()=>{const t=document.querySelector(".form-section"),o=document.querySelector("#td-project-input"),e=t=>{const o=document.querySelector(".add-todo"),e=document.querySelector(".add-project");switch(t){case"todo":o.classList.add("current"),e.classList.remove("current");break;case"project":e.classList.add("current"),o.classList.remove("current")}};return{addProject:(t,e)=>{const d=document.createElement("option");d.value=`project-${t}`,d.textContent=e,o.append(d)},show:()=>{e("todo"),t.classList.toggle("form-open")},switchFormsTo:e}})()})();const t=(()=>{let t=[],o=0,e=0;const d=t=>{t.sort(((t,o)=>t.priority-o.priority))};return{project:{add:(o,r)=>{t.push({id:e,name:o,priority:r,todoList:[]}),e++,d(t)},forDOM:()=>{let o=[];return t.forEach((t=>{o.push({id:t.id,name:t.name,tasks:t.todoList.length})})),o},remove:o=>{const e=t.indexOf(t.filter((t=>t.id===o))[0]);t.splice(e,1)}},todo:(()=>{const e=o=>{const e=t.indexOf(t.filter((t=>t.id===o))[0]);return t[e].todoList},r=o=>{const d=e(o);let r=[];return d.forEach((e=>{r.push({id:e.id,title:e.title,dueDate:e.dueDate,projectName:t.filter((t=>t.id===o))[0].name,done:21===e.priority})})),r};return{add:(t,r,c,l)=>{let s=e(t);s.push({id:o,title:r,dueDate:c,priority:l}),o++,d(s)},remove:(t,o)=>{const d=e(t),r=d.indexOf(d.filter((t=>t.id===o))[0]);d.splice(r,1)},forDOM:r,allForDOM:()=>{let o=[];return t.forEach((t=>o.push(r(t.id)))),o.flat(1)}}})()}})();t.project.add("hi",1),t.project.add("h2i",1),t.project.add("hi3",3),t.project.add("hi4",2),t.todo.add(1,"lol","date",1),t.todo.add(1,"lo2l","date",1),t.todo.add(3,"lo3l","date",1),t.todo.add(1,"lo2l","date",2),t.todo.add(3,"lo3l","date",2),t.todo.add(2,"lo3l","date",4),console.log(t.todo.allForDOM()),console.log(t.project.forDOM()),console.log(t.todo.forDOM(1))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkwsUUFBT1ksR0FBTUEsRUFBR3hDLEtBQU9BLElBQUksSUFDckZpQyxFQUFnQkosT0FBT1UsRUFBVSxFQUFFLEVBb0JsQmxCLFNBQVFvQixVQUxYLEtBQ2QsSUFBSTVCLEVBQU8sR0FFWCxPQURBSixFQUFZYSxTQUFRQyxHQUFRVixFQUFLTSxLQUFLRSxFQUFPRSxFQUFLdkIsT0FDM0NhLEVBQUs2QixLQUFLLEVBQUUsRUFHMUIsRUFuQ1ksR0FzQ2hCLEVBeEVtQixHQTBFcEJsQyxFQUFZVSxRQUFRckIsSUFBSSxLQUFLLEdBQzdCVyxFQUFZVSxRQUFRckIsSUFBSSxNQUFNLEdBQzlCVyxFQUFZVSxRQUFRckIsSUFBSSxNQUFNLEdBQzlCVyxFQUFZVSxRQUFRckIsSUFBSSxNQUFNLEdBRTlCVyxFQUFZc0IsS0FBS2pDLElBQUksRUFBRyxNQUFNLE9BQU8sR0FDckNXLEVBQVlzQixLQUFLakMsSUFBSSxFQUFHLE9BQU8sT0FBTyxHQUN0Q1csRUFBWXNCLEtBQUtqQyxJQUFJLEVBQUcsT0FBTyxPQUFPLEdBQ3RDVyxFQUFZc0IsS0FBS2pDLElBQUksRUFBRyxPQUFPLE9BQU8sR0FDdENXLEVBQVlzQixLQUFLakMsSUFBSSxFQUFHLE9BQU8sT0FBTyxHQUN0Q1csRUFBWXNCLEtBQUtqQyxJQUFJLEVBQUcsT0FBTyxPQUFPLEdBR2xDOEMsUUFBUUMsSUFBSXBDLEVBQVlzQixLQUFLVyxhQUM3QkUsUUFBUUMsSUFBSXBDLEVBQVlVLFFBQVFHLFVBQ2hDc0IsUUFBUUMsSUFBSXBDLEVBQVlzQixLQUFLVCxPQUFPLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLW9kaW4vLi9zcmMvbWFuaXBzLmpzIiwid2VicGFjazovL3RvZG8tb2Rpbi8uL3NyYy9kYXRhLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNUT1JFUyBET00gTUFOSVBVTEFUSU9OU1xuXG5jb25zdCBET01IYW5kbGVyID0gKCgpID0+IHtcblxuICAgIGNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGFkZE5ld0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtbmV3LWJ1dHRvbicpO1xuICAgICAgICBjb25zdCB0b2RvQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RvLWRvLXRhYicpO1xuICAgICAgICBjb25zdCBwcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2plY3QtdGFiJyk7XG4gICAgICAgIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Nsb3NlLXRhYicpO1xuXG4gICAgICAgIGFkZE5ld0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF9mb3JtLnNob3cpO1xuICAgICAgICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF9mb3JtLnNob3cpO1xuICAgICAgICB0b2RvQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgX2Zvcm0uc3dpdGNoRm9ybXNUbygndG9kbycpO1xuICAgICAgICB9KTtcbiAgICAgICAgcHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgX2Zvcm0uc3dpdGNoRm9ybXNUbygncHJvamVjdCcpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gVE8tRE8gTUFOSVBTXG5cbiAgICBjb25zdCB0b2RvID0gKCgpID0+IHtcbiAgICAgICAgbGV0IHRhYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGFibGUgdGJvZHknKTtcblxuICAgICAgICBjb25zdCByZWZyZXNoQWxsID0gdG9kb0FycmF5ID0+IHtcbiAgICAgICAgICAgIGNsZWFyQWxsKCk7XG4gICAgICAgICAgICB0b2RvQXJyYXkuZm9yRWFjaCh0b2RvT2JqZWN0ID0+IHtcbiAgICAgICAgICAgICAgICAvLyBkZXN0cnVjdHVyZSB0aGUgb2JqZWN0IGFuZCBJSUZFIGl0IGludG8gYWRkXG4gICAgICAgICAgICAgICAgKCh7aWQsIHRpdGxlLCBkdWVEYXRlLCBwcm9qZWN0TmFtZX0pID0+IFxuICAgICAgICAgICAgICAgIGFkZChpZCwgdGl0bGUsIGR1ZURhdGUsIHByb2plY3ROYW1lKSkodG9kb09iamVjdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1hcmtEb25lID0gKGlkKSA9PiBcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHRyW2RhdGEtbnVtPScke2lkfSddYClcbiAgICAgICAgICAgICAgICAgICAgLmNsYXNzTGlzdFxuICAgICAgICAgICAgICAgICAgICAudG9nZ2xlKCdkb25lJyk7XG5cbiAgICAgICAgY29uc3QgY2xlYXJBbGwgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdCb2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGJvZHknKTtcbiAgICAgICAgICAgIHRhYmxlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld0JvZHksIHRhYmxlKTtcbiAgICAgICAgICAgIC8vIHRoZSBub2RlIHRoYXQgdXNlZCB0byBiZSB0YWJsZSBpcyBub3cgZ29uZS5cbiAgICAgICAgICAgIC8vIHNvIHJlZnJlc2ggaXRcbiAgICAgICAgICAgIHRhYmxlID0gbmV3Qm9keTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFkZCA9IChpZCwgdGl0bGUsIGR1ZURhdGUsIHByb2plY3ROYW1lKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdSb3cgPSB0YWJsZS5pbnNlcnRSb3coKTtcbiAgICAgICAgICAgIG5ld1Jvdy5kYXRhc2V0Lm51bSA9IGlkO1xuXG4gICAgICAgICAgICBjb25zdCBuZXdDaGsgPSBuZXdSb3cuaW5zZXJ0Q2VsbCgwKTtcbiAgICAgICAgICAgIGNvbnN0IENoa0luID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgIENoa0luLnR5cGUgPSAnY2hlY2tib3gnO1xuICAgICAgICAgICAgLy8gQ2hlY2tib3ggRXZlbnQgTGlzdGVuZXJcbiAgICAgICAgICAgIC8vIFRoaXMgc2hvdWxkIG5vdCBoYXBwZW4gZGlyZWN0bHksXG4gICAgICAgICAgICAvLyBidXQgbWFya0RvbmUgc2hvdWxkIGdldCBjYWxsZWQgYnkgYSBmdW5jdGlvblxuICAgICAgICAgICAgLy8gYWZ0ZXIgb2JqZWN0IHN0YXRlIGlzIGNoYW5nZWQgXG4gICAgICAgICAgICBDaGtJbi5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbWFya0RvbmUoaWQpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIG5ld0Noay5hcHBlbmQoQ2hrSW4pO1xuXG4gICAgICAgICAgICBjb25zdCBuZXdUaXRsZSA9IG5ld1Jvdy5pbnNlcnRDZWxsKDEpO1xuICAgICAgICAgICAgbmV3VGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZTtcblxuICAgICAgICAgICAgY29uc3QgbmV3RGF0ZSA9IG5ld1Jvdy5pbnNlcnRDZWxsKDIpO1xuICAgICAgICAgICAgbmV3RGF0ZS50ZXh0Q29udGVudCA9IGR1ZURhdGU7XG5cbiAgICAgICAgICAgIGNvbnN0IG5ld1Byb2plY3QgPSBuZXdSb3cuaW5zZXJ0Q2VsbCgzKTtcbiAgICAgICAgICAgIG5ld1Byb2plY3QudGV4dENvbnRlbnQgPSBwcm9qZWN0TmFtZTtcblxuICAgICAgICAgICAgY29uc3QgbmV3RWRpdCA9IG5ld1Jvdy5pbnNlcnRDZWxsKDQpO1xuICAgICAgICAgICAgY29uc3QgRWRpdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgRWRpdEJ0bi5kYXRhc2V0Lm51bSA9IGlkOyAvLyBtYXkgbm90IGV2ZW4gYmUgcmVsZXZhbnRcbiAgICAgICAgICAgIEVkaXRCdG4uY2xhc3NMaXN0LmFkZCgnZWRpdCcpO1xuICAgICAgICAgICAgRWRpdEJ0bi50ZXh0Q29udGVudCA9IFwiRWRpdFwiO1xuICAgICAgICAgICAgLy8gRWRpdCBFdmVudCBMaXN0ZW5lclxuICAgICAgICAgICAgbmV3RWRpdC5hcHBlbmQoRWRpdEJ0bik7XG5cblxuICAgICAgICAgICAgY29uc3QgbmV3Um12ID0gbmV3Um93Lmluc2VydENlbGwoNSk7XG4gICAgICAgICAgICBjb25zdCBSbXZCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgICAgIFJtdkJ0bi5kYXRhc2V0Lm51bSA9IGlkOyAvLyBtYXkgbm90IGV2ZW4gYmUgcmVsZXZhbnRcbiAgICAgICAgICAgIFJtdkJ0bi5jbGFzc0xpc3QuYWRkKCdybXYnKTtcbiAgICAgICAgICAgIFJtdkJ0bi50ZXh0Q29udGVudCA9IFwiUmVtb3ZlXCI7XG4gICAgICAgICAgICAvLyBSZW1vdmUgRXZlbnQgTGlzdGVuZXJcbiAgICAgICAgICAgIC8vIFRoaXMgc2hvdWxkIE5PVCBkaXJlY3RseSBjYWxsIHRoZSBET00gTWFuaXAuIE90aGVyd2lzZVxuICAgICAgICAgICAgLy8gdGhlIHVuZGVybHlpbmcgVG8tZG8gb2JqZWN0IHdpbGwgbm90IGJlIGRlbGV0ZWQhXG4gICAgICAgICAgICAvLyBSbXZCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiByZW1vdmUoaWQpKTtcblxuICAgICAgICAgICAgbmV3Um12LmFwcGVuZChSbXZCdG4pO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtyZWZyZXNoQWxsfTtcblxuICAgIH0pKCk7XG5cbiAgICAvLyBQUk9KRUNUIE1BTklQU1xuXG4gICAgY29uc3QgdXBkYXRlVmlld0FsbCA9IHRhc2tzID0+IHtcbiAgICAgICAgY29uc3Qgdmlld0FsbE51bWJlckRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN2aWV3LWFsbCAucHJvamVjdC1ubycpO1xuICAgICAgICB2aWV3QWxsTnVtYmVyRGl2LnRleHRDb250ZW50ID0gdGFza3M7XG4gICAgfVxuXG4gICAgY29uc3QgcHJvamVjdCA9ICgoKSA9PiB7XG4gICAgICAgIGNvbnN0IHByb2plY3RzTGlzdEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdHMtbGlzdCcpO1xuXG4gICAgICAgIGNvbnN0IHJlZnJlc2hBbGwgPSBwcm9qZWN0QXJyYXkgPT4ge1xuICAgICAgICAgICAgY2xlYXJBbGwoKTtcbiAgICAgICAgICAgIHByb2plY3RBcnJheS5mb3JFYWNoKHByb2plY3RPYmplY3QgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGRlc3RydWN0dXJlIHRoZSBvYmplY3QgYW5kIElJRkUgaXQgaW50byBhZGRcbiAgICAgICAgICAgICAgICAoKHtpZCwgbmFtZSwgdGFza3N9KSA9PiBcbiAgICAgICAgICAgICAgICBhZGQoaWQsIG5hbWUsIHRhc2tzKSkocHJvamVjdE9iamVjdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjbGVhckFsbCA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3RMaXN0SXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdsaS5wcm9qZWN0Jyk7XG4gICAgICAgICAgICBwcm9qZWN0TGlzdEl0ZW1zLmZvckVhY2gocHJvaiA9PiBwcm9qLnJlbW92ZSgpKTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBjb25zdCBhZGQgPSAoaWQsIG5hbWUsIHRhc2tzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICAgICAgY29uc3QgbmV3RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgXG4gICAgICAgICAgICAvLyBJRCBnZW5lcmF0aW9uIHNob3VsZCBiZSBoYW5kbGVkIGluIGxvZ2ljLiBcbiAgICAgICAgICAgIG5ld0l0ZW0uaWQgPSBgcHJvamVjdC0ke2lkfWA7XG4gICAgICAgICAgICBfZm9ybS5hZGRQcm9qZWN0KGlkLCBuYW1lKTtcbiAgICBcbiAgICAgICAgICAgIG5ld0Rpdi5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LW5vJyk7XG4gICAgICAgICAgICBuZXdCdG4uY2xhc3NMaXN0LmFkZCgncHJvamVjdCcpO1xuICAgICAgICAgICAgbmV3SXRlbS5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0Jyk7XG4gICAgXG4gICAgICAgICAgICBuZXdEaXYudGV4dENvbnRlbnQgPSB0YXNrcztcbiAgICAgICAgICAgIG5ld0J0bi50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG5ld0J0bi5hcHBlbmQobmV3RGl2KTtcbiAgICAgICAgICAgIG5ld0l0ZW0uYXBwZW5kKG5ld0J0bik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHByb2plY3RzTGlzdEVsZW1lbnQuYXBwZW5kKG5ld0l0ZW0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEkgYW0gbm90IHN1cmUgaWYgdGhlc2Ugd2lsbCBiZSByZWxldmFudCBsYXRlci5cblxuICAgICAgICAvLyBjb25zdCByZW1vdmUgPSBpZCA9PiB7XG4gICAgICAgIC8vICAgICBjb25zdCBpdGVtVG9SZW1vdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjcHJvamVjdC0ke2lkfWApO1xuICAgICAgICAvLyAgICAgaXRlbVRvUmVtb3ZlLnJlbW92ZSgpO1xuICAgICAgICAvLyAgICAgX2Zvcm0ucmVtb3ZlUHJvamVjdChpZCk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gY29uc3QgdXBkYXRlID0gKGlkLCB0YXNrcykgPT4ge1xuICAgICAgICAvLyAgICAgY29uc3QgbnVtYmVyRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3Byb2plY3QtJHtpZH0gLnByb2plY3Qtbm9gKTtcbiAgICAgICAgLy8gICAgIG51bWJlckRpdi50ZXh0Q29udGVudCA9IHRhc2tzO1xuICAgICAgICAgICAgXG4gICAgICAgIC8vIH1cbiAgICBcbiAgICAgICAgLy8gLy8gSSBhbSBub3Qgc3VyZSBpZiB0aGlzIGlzIHVzZWZ1bCBvciBjb3JyZWN0LlxuICAgICAgICAvLyBjb25zdCBfdXBkYXRlTmFtZSA9IChpZCwgbmFtZSkgPT4ge1xuICAgICAgICAvLyAgICAgY29uc3QgbmFtZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNwcm9qZWN0LSR7aWR9IGJ1dHRvbmApO1xuICAgICAgICAvLyAgICAgY29uc3QgbnVtYmVyRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgI3Byb2plY3QtJHtpZH0gLnByb2plY3Qtbm9gKTtcbiAgICAgICAgLy8gICAgIG5hbWVCdG4udGV4dENvbnRlbnQgPSBuYW1lO1xuICAgICAgICAvLyAgICAgbmFtZUJ0bi5hcHBlbmQobnVtYmVyRGl2KTtcbiAgICAgICAgLy8gICAgIC8vIGZvcm1NYW5pcHMuYWRkUHJvamVjdChpZCwgbmFtZSk7XG4gICAgICAgIC8vIH1cbiAgICBcbiAgICAgICAgcmV0dXJuIHtyZWZyZXNoQWxsfVxuICAgIH0pKCk7XG4gICAgXG4gICAgLy8gRk9STSBNQU5JUFNcbiAgICBcbiAgICBjb25zdCBfZm9ybSA9ICgoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm1TZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0tc2VjdGlvbicpO1xuICAgICAgICBjb25zdCBwcm9qZWN0T3B0aW9uc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGQtcHJvamVjdC1pbnB1dCcpO1xuXG4gICAgICAgIGNvbnN0IHNob3cgPSAoKSA9PiB7XG4gICAgICAgICAgICBzd2l0Y2hGb3Jtc1RvKCd0b2RvJyk7XG4gICAgICAgICAgICBmb3JtU2VjdGlvbi5jbGFzc0xpc3QudG9nZ2xlKCdmb3JtLW9wZW4nKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBzd2l0Y2hGb3Jtc1RvID0gbmFtZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0b2RvRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtdG9kbycpO1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXByb2plY3QnKTtcbiAgICAgICAgICAgIC8vIHRoaXMgaW1wbGVtZW50YXRpb24gbWFrZXMgaXQgZWFzeSB0byBhZGQsIGVnLCBhIG5vdGVzIHRhYlxuICAgICAgICAgICAgc3dpdGNoKG5hbWUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICd0b2RvJzpcbiAgICAgICAgICAgICAgICAgICAgdG9kb0Zvcm0uY2xhc3NMaXN0LmFkZCgnY3VycmVudCcpO1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0Rm9ybS5jbGFzc0xpc3QucmVtb3ZlKCdjdXJyZW50Jyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3Byb2plY3QnOlxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0Rm9ybS5jbGFzc0xpc3QuYWRkKCdjdXJyZW50Jyk7XG4gICAgICAgICAgICAgICAgICAgIHRvZG9Gb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ2N1cnJlbnQnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7IFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBhZGRQcm9qZWN0ID0gKGlkLCBuYW1lKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdPcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAgICAgICAgIG5ld09wdGlvbi52YWx1ZSA9IGBwcm9qZWN0LSR7aWR9YDtcbiAgICAgICAgICAgIG5ld09wdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgICAgICAgICBwcm9qZWN0T3B0aW9uc0xpc3QuYXBwZW5kKG5ld09wdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTm90IHN1cmUgaWYgd2lsbCBiZSByZWxldmFudCBMYXRlclxuICAgICAgICAvLyBjb25zdCByZW1vdmVQcm9qZWN0ID0gaWQgPT4ge1xuICAgICAgICAvLyAgICAgY29uc3Qgb3B0aW9uVG9SZW1vdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBvcHRpb25bdmFsdWU9J3Byb2plY3QtJHtpZH0nXWApO1xuICAgICAgICAvLyAgICAgb3B0aW9uVG9SZW1vdmUucmVtb3ZlKCk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgcmV0dXJuIHthZGRQcm9qZWN0LCBzaG93LCBzd2l0Y2hGb3Jtc1RvfTtcbiAgICB9KSgpO1xuXG5cblxuXG4gICAgcmV0dXJuIHtpbml0LCBwcm9qZWN0LCB0b2RvLCB1cGRhdGVWaWV3QWxsfTtcblxufSkoKTtcblxuXG5cblxuXG5cblxuXG5cblxuZXhwb3J0IHtET01IYW5kbGVyfTsiLCIvLyBOQjogcHJpb3JpdHkgPSAwIG9yIC0xIGZvciBhIENvbXBsZXRlZCBUYXNrXG4vLyAoRE9ORSlHZW5lcmF0ZSBET00tZnJpZW5kbHkgRGlzcGxheSBMaXN0XG4vLyAoRE9ORSljYWxjdWxhdGUgaG93IG1hbnkgdGFza3MgcGVyIHByb2plY3Rcbi8vIChET05FKWdldCBwcm9qZWN0IG5hbWUgZm9yIGVhY2ggdGFza1xuLy8gKERPTkUpb3JnYW5pemUgbGlzdCBieSBwcmlvcml0aWVzXG4vLyAoRE9ORSlvcmdhbml6ZSBsaXN0IGJ5IGNob2ljZS9wcm9qZWN0XG4vLyAoRE9ORSlBZGQscmVtb3ZlIHRvZG9zICYgcHJvamVjdHNcbi8vIFBSSU9SSVRZIDIxID09PSBET05FXG4vLyAoRE9ORSltYWtlIGl0IHNvIHRoYXQgaWRzIGFyZSBnZW5lcmF0ZWQgYXV0b21hdGljYWxseS5cblxuY29uc3QgRGF0YUhhbmRsZXIgPSAoKCkgPT4ge1xuICAgIGxldCBwcm9qZWN0TGlzdCA9IFtdO1xuXG4gICAgbGV0IHRhc2tJZENvdW50ID0gMDtcbiAgICBsZXQgcHJvamVjdElkQ291bnQgPSAwO1xuXG4gICAgY29uc3Qgc29ydExpc3QgPSAobGlzdCkgPT4ge1xuICAgICAgICBsaXN0LnNvcnQoKGEsYik9PmEucHJpb3JpdHkgLSBiLnByaW9yaXR5KTtcbiAgICB9XG5cblxuXG4gICAgY29uc3QgcHJvamVjdCA9ICgoKT0+e1xuICAgICAgICBjb25zdCBhZGQgPSAobmFtZSwgcHJpb3JpdHkpID0+IHtcbiAgICAgICAgICAgIGxldCB0b2RvTGlzdCA9IFtdO1xuICAgICAgICAgICAgcHJvamVjdExpc3QucHVzaCh7aWQ6IHByb2plY3RJZENvdW50LG5hbWUscHJpb3JpdHksdG9kb0xpc3R9KVxuICAgICAgICAgICAgcHJvamVjdElkQ291bnQrKztcbiAgICAgICAgICAgIHNvcnRMaXN0KHByb2plY3RMaXN0KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZW1vdmUgPSBpZCA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0SW5kZXggPSBwcm9qZWN0TGlzdC5pbmRleE9mKHByb2plY3RMaXN0LmZpbHRlcihwcm9qID0+IHByb2ouaWQgPT09IGlkKVswXSk7XG4gICAgICAgICAgICBwcm9qZWN0TGlzdC5zcGxpY2UocHJvamVjdEluZGV4LDEpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVkaXRcbiAgICAgICAgY29uc3QgZm9yRE9NID0gKCkgPT4ge1xuICAgICAgICAgICAgbGV0IGxpc3QgPSBbXTtcbiAgICAgICAgICAgIC8vIGlkLCB0aXRsZSwgbnVtYmVyXG4gICAgICAgICAgICBwcm9qZWN0TGlzdC5mb3JFYWNoKHByb2ogPT4ge1xuICAgICAgICAgICAgICAgIGxpc3QucHVzaCh7aWQ6IHByb2ouaWQsIG5hbWU6IHByb2oubmFtZSwgdGFza3M6IHByb2oudG9kb0xpc3QubGVuZ3RofSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBsaXN0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7YWRkLCBmb3JET00sIHJlbW92ZX07XG4gICAgfSkoKTtcbiAgICBjb25zdCB0b2RvID0gKCgpPT57XG4gICAgICAgIGNvbnN0IGdldFRvZG9MaXN0ID0gKHByb2plY3RJZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdEluZGV4ID0gcHJvamVjdExpc3QuaW5kZXhPZihwcm9qZWN0TGlzdC5maWx0ZXIocHJvaiA9PiBwcm9qLmlkID09PSBwcm9qZWN0SWQpWzBdKTtcbiAgICAgICAgICAgIHJldHVybiBwcm9qZWN0TGlzdFtwcm9qZWN0SW5kZXhdLnRvZG9MaXN0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFkZCA9IChwcm9qZWN0SWQsIHRpdGxlLCBkdWVEYXRlLCBwcmlvcml0eSkgPT4ge1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRUb2RvTGlzdCA9IGdldFRvZG9MaXN0KHByb2plY3RJZCk7XG4gICAgICAgICAgICBjdXJyZW50VG9kb0xpc3QucHVzaCh7aWQ6IHRhc2tJZENvdW50LCB0aXRsZSwgZHVlRGF0ZSwgcHJpb3JpdHl9KTtcbiAgICAgICAgICAgIHRhc2tJZENvdW50Kys7XG4gICAgICAgICAgICBzb3J0TGlzdChjdXJyZW50VG9kb0xpc3QpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlbW92ZSA9IChwcm9qZWN0SWQsaWQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUb2RvTGlzdCA9IGdldFRvZG9MaXN0KHByb2plY3RJZCk7XG4gICAgICAgICAgICBjb25zdCB0b2RvSW5kZXggPSBjdXJyZW50VG9kb0xpc3QuaW5kZXhPZihjdXJyZW50VG9kb0xpc3QuZmlsdGVyKHRkID0+IHRkLmlkID09PSBpZClbMF0pO1xuICAgICAgICAgICAgY3VycmVudFRvZG9MaXN0LnNwbGljZSh0b2RvSW5kZXgsMSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZm9yRE9NID0gKHByb2plY3RJZCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFRvZG9MaXN0ID0gZ2V0VG9kb0xpc3QocHJvamVjdElkKTtcbiAgICAgICAgICAgIGxldCBsaXN0ID0gW107XG4gICAgICAgICAgICAvLyBpZCwgdGl0bGUsIGR1ZURhdGUsIHByb2plY3ROYW1lLCBkb25lP1xuICAgICAgICAgICAgY3VycmVudFRvZG9MaXN0LmZvckVhY2godGFzayA9PiB7XG4gICAgICAgICAgICAgICAgbGlzdC5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHRhc2suaWQsIHRpdGxlOiB0YXNrLnRpdGxlLCBkdWVEYXRlOiB0YXNrLmR1ZURhdGUsXG4gICAgICAgICAgICAgICAgICAgIHByb2plY3ROYW1lOiBwcm9qZWN0TGlzdC5maWx0ZXIocHJvaiA9PiBwcm9qLmlkID09PSBwcm9qZWN0SWQpWzBdLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGRvbmU6IHRhc2sucHJpb3JpdHkgPT09IDIxID8gdHJ1ZSA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gbGlzdDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhbGxGb3JET00gPSAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgbGlzdCA9IFtdO1xuICAgICAgICAgICAgcHJvamVjdExpc3QuZm9yRWFjaChwcm9qID0+IGxpc3QucHVzaChmb3JET00ocHJvai5pZCkpKTtcbiAgICAgICAgICAgIHJldHVybiBsaXN0LmZsYXQoMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHthZGQsIHJlbW92ZSwgZm9yRE9NLCBhbGxGb3JET019O1xuICAgIH0pKCk7XG5cbiAgICByZXR1cm4ge3Byb2plY3QsIHRvZG99O1xufSkoKTtcblxuRGF0YUhhbmRsZXIucHJvamVjdC5hZGQoJ2hpJywxKTtcbkRhdGFIYW5kbGVyLnByb2plY3QuYWRkKCdoMmknLDEpO1xuRGF0YUhhbmRsZXIucHJvamVjdC5hZGQoJ2hpMycsMyk7XG5EYXRhSGFuZGxlci5wcm9qZWN0LmFkZCgnaGk0JywyKTtcblxuRGF0YUhhbmRsZXIudG9kby5hZGQoMSwgJ2xvbCcsJ2RhdGUnLDEpO1xuRGF0YUhhbmRsZXIudG9kby5hZGQoMSwgJ2xvMmwnLCdkYXRlJywxKTtcbkRhdGFIYW5kbGVyLnRvZG8uYWRkKDMsICdsbzNsJywnZGF0ZScsMSk7XG5EYXRhSGFuZGxlci50b2RvLmFkZCgxLCAnbG8ybCcsJ2RhdGUnLDIpO1xuRGF0YUhhbmRsZXIudG9kby5hZGQoMywgJ2xvM2wnLCdkYXRlJywyKTtcbkRhdGFIYW5kbGVyLnRvZG8uYWRkKDIsICdsbzNsJywnZGF0ZScsNCk7XG5cbmNvbnN0IGxvbCA9ICgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhEYXRhSGFuZGxlci50b2RvLmFsbEZvckRPTSgpKTtcbiAgICBjb25zb2xlLmxvZyhEYXRhSGFuZGxlci5wcm9qZWN0LmZvckRPTSgpKTtcbiAgICBjb25zb2xlLmxvZyhEYXRhSGFuZGxlci50b2RvLmZvckRPTSgxKSk7fTtcblxuZXhwb3J0IHtsb2x9OyJdLCJuYW1lcyI6WyJ0YWJsZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInByb2plY3RzTGlzdEVsZW1lbnQiLCJfZm9ybSIsImZvcm1TZWN0aW9uIiwicHJvamVjdE9wdGlvbnNMaXN0Iiwic3dpdGNoRm9ybXNUbyIsIm5hbWUiLCJ0b2RvRm9ybSIsInByb2plY3RGb3JtIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiYWRkUHJvamVjdCIsImlkIiwibmV3T3B0aW9uIiwiY3JlYXRlRWxlbWVudCIsInZhbHVlIiwidGV4dENvbnRlbnQiLCJhcHBlbmQiLCJzaG93IiwidG9nZ2xlIiwiRGF0YUhhbmRsZXIiLCJwcm9qZWN0TGlzdCIsInRhc2tJZENvdW50IiwicHJvamVjdElkQ291bnQiLCJzb3J0TGlzdCIsImxpc3QiLCJzb3J0IiwiYSIsImIiLCJwcmlvcml0eSIsInByb2plY3QiLCJwdXNoIiwidG9kb0xpc3QiLCJmb3JET00iLCJmb3JFYWNoIiwicHJvaiIsInRhc2tzIiwibGVuZ3RoIiwicHJvamVjdEluZGV4IiwiaW5kZXhPZiIsImZpbHRlciIsInNwbGljZSIsInRvZG8iLCJnZXRUb2RvTGlzdCIsInByb2plY3RJZCIsImN1cnJlbnRUb2RvTGlzdCIsInRhc2siLCJ0aXRsZSIsImR1ZURhdGUiLCJwcm9qZWN0TmFtZSIsImRvbmUiLCJ0b2RvSW5kZXgiLCJ0ZCIsImFsbEZvckRPTSIsImZsYXQiLCJjb25zb2xlIiwibG9nIl0sInNvdXJjZVJvb3QiOiIifQ==